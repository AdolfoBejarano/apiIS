{"version":3,"file":"ComponentErrorFallback.js","sources":["../../../src/components/errorBoundary/ComponentErrorFallback.tsx"],"sourcesContent":["import { useState } from \"react\";\n\nimport { DialogComponent } from \"components/dialog/Dialog\";\nimport { HeadingComponent } from \"components/heading/Heading\";\nimport { StackComponent } from \"components/stack/Stack\";\nimport { getIsLocalDev } from \"getIsLocalDev\";\nimport { useToggleModal } from \"message/useToggleModal\";\n\nimport { ComponentErrorState } from \"./ComponentErrorState\";\nimport { useStyles as useErrorModalStyles } from \"./ErrorModal.styles\";\nimport { ErrorStackTraceProps, ErrorStackTrace } from \"./ErrorStackTrace\";\nimport { LatestRunDetails, LatestRun } from \"./LatestRunDetails\";\n\nexport type ComponentErrorFallbackProps = {\n  componentName?: string;\n  latestRun?: LatestRun;\n  errorID: string;\n} & ErrorStackTraceProps;\n\nexport const ComponentErrorFallback = ({\n  error,\n  errorInfo,\n  componentName,\n  latestRun,\n  errorID,\n}: ComponentErrorFallbackProps) => {\n  const isLocalDev = getIsLocalDev();\n  const [opened, setOpened] = useState(isLocalDev);\n  useToggleModal(setOpened, errorID);\n\n  return (\n    <>\n      <ComponentErrorModal\n        error={error}\n        errorInfo={errorInfo}\n        componentName={componentName}\n        latestRun={latestRun}\n        opened={opened}\n        setOpened={setOpened}\n      />\n      <ComponentErrorState\n        componentName={componentName}\n        onClick={() => setOpened(true)}\n      />\n    </>\n  );\n};\n\ntype ComponentErrorModalProps = {\n  componentName?: string;\n  latestRun?: LatestRun;\n  opened: boolean;\n  setOpened: (opened: boolean) => void;\n} & ErrorStackTraceProps;\n\nexport const ComponentErrorModal = ({\n  error,\n  errorInfo,\n  componentName,\n  latestRun,\n  opened,\n  setOpened,\n}: ComponentErrorModalProps) => {\n  const { classes } = useErrorModalStyles();\n  return (\n    <DialogComponent\n      opened={opened}\n      onClose={() => setOpened(false)}\n      title={\n        <HeadingComponent level={4} className={classes.title}>\n          Something went wrong{\" \"}\n          {componentName ? ` in the ${componentName} component` : \"\"}\n        </HeadingComponent>\n      }\n      size=\"100%\"\n      classNames={{ modal: classes.modal }}\n      trapFocus={false}\n    >\n      <StackComponent>\n        <ErrorStackTrace error={error} errorInfo={errorInfo} />\n        {latestRun && <LatestRunDetails {...latestRun} />}\n      </StackComponent>\n    </DialogComponent>\n  );\n};\n"],"names":["ComponentErrorFallback","error","errorInfo","componentName","latestRun","errorID","isLocalDev","getIsLocalDev","opened","setOpened","useState","useToggleModal","ComponentErrorModal","classes","useErrorModalStyles","title","modal"],"mappings":";;;;;;;;;;;AAmBO,MAAMA,yBAAyBA,CAAC;AAAA,EACrCC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAC2B,MAAM;AACjC,QAAMC,aAAaC;AACnB,QAAM,CAACC,QAAQC,SAAS,IAAIC,SAASJ,UAAU;AAC/CK,iBAAeF,WAAWJ,OAAO;AAEjC,SAEI,qBAAA,UAAA,EAAA,UAAA;AAAA,IAAA,oBAAC,uBACC,OACA,WACA,eACA,WACA,QACA,WAAqB;AAAA,wBAEtB,qBACC,EAAA,eACA,SAAS,MAAMI,UAAU,IAAI,GAAE;AAAA,EAEnC,EAAA,CAAA;AAEJ;AASO,MAAMG,sBAAsBA,CAAC;AAAA,EAClCX;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAI;AAAAA,EACAC;AACwB,MAAM;AACxB,QAAA;AAAA,IAAEI;AAAAA,MAAYC,UAAoB;AACxC,SACG,oBAAA,iBAAA,EACC,QACA,SAAS,MAAML,UAAU,KAAK,GAC9B,4BACG,kBAAiB,EAAA,OAAO,GAAG,WAAWI,QAAQE,OAAM,UAAA;AAAA,IAAA;AAAA,IAC9B;AAAA,IACpBZ,gBAAiB,WAAUA,aAAc,eAAc;AAAA,EAC1D,EAAA,CAAA,GAEF,MAAK,QACL,YAAY;AAAA,IAAEa,OAAOH,QAAQG;AAAAA,EAAAA,GAC7B,WAAW,OAEX,UAAA,qBAAC,gBACC,EAAA,UAAA;AAAA,IAAC,oBAAA,iBAAA,EAAgB,OAAc,UAAqB,CAAA;AAAA,IACnDZ,aAAa,oBAAC,kBAAiB,EAAA,GAAIA,UAAa,CAAA;AAAA,EAAA,EACnD,CAAA,EACF,CAAA;AAEJ;"}