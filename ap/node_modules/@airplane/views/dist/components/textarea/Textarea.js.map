{"version":3,"file":"Textarea.js","sources":["../../../src/components/textarea/Textarea.tsx"],"sourcesContent":["import { Textarea as MantineTextarea } from \"@mantine/core\";\nimport { useMergedRef } from \"@mantine/hooks\";\nimport { ChangeEvent, forwardRef, Ref, useCallback, useRef } from \"react\";\nimport * as React from \"react\";\n\nimport { ComponentErrorBoundary } from \"components/errorBoundary/ComponentErrorBoundary\";\nimport { useCommonLayoutStyle } from \"components/layout/useCommonLayoutStyle\";\nimport { useRegisterFormInput } from \"state/components/form/useRegisterFormInput\";\nimport { useInput } from \"state/components/input/useInput\";\nimport { useTextareaState } from \"state/components/text-input\";\nimport { useComponentId } from \"state/components/useId\";\n\nimport { TextareaComponentProps, TextareaProps } from \"./Textarea.types\";\n\nexport const TextareaComponent = forwardRef(\n  (props: TextareaComponentProps, ref: React.Ref<HTMLTextAreaElement>) => (\n    <MantineTextarea {...props} ref={ref} />\n  ),\n);\n\nexport const Textarea = forwardRef(\n  (props: TextareaProps, ref: React.Ref<HTMLTextAreaElement>) => (\n    <ComponentErrorBoundary componentName={DISPLAY_NAME}>\n      <TextareaWithoutRef {...props} innerRef={ref} />\n    </ComponentErrorBoundary>\n  ),\n);\n\nexport const TextareaWithoutRef = (\n  props: TextareaProps & { innerRef: React.Ref<HTMLTextAreaElement> },\n) => {\n  const [inputRef, focus] = useFocus();\n  const mergedRef = useMergedRef(inputRef, props.innerRef);\n  const id = useComponentId(props.id);\n  const { state, dispatch } = useTextareaState(id, {\n    initialState: {\n      disabled: props.disabled ?? props.defaultDisabled,\n      value: props.value ?? props.defaultValue,\n    },\n    focus,\n  });\n  const { inputProps } = useInput(\n    props,\n    state,\n    dispatch,\n    (e: ChangeEvent<HTMLTextAreaElement>) => e.currentTarget.value,\n  );\n  useRegisterFormInput(id, \"text-input\");\n  const {\n    className,\n    style,\n    width,\n    height,\n    grow,\n    innerRef: _,\n    validate: __,\n    onChange: ___,\n    defaultDisabled: ____,\n    defaultValue: _____,\n    ...restProps\n  } = props;\n  const { classes: layoutClasses, cx } = useCommonLayoutStyle({\n    width,\n    height,\n    grow,\n  });\n  return (\n    <TextareaComponent\n      ref={mergedRef}\n      className={cx(layoutClasses.style, className)}\n      style={style}\n      {...inputProps}\n      {...restProps}\n    />\n  );\n};\n\nconst useFocus = (): [Ref<HTMLTextAreaElement>, () => void] => {\n  const htmlElRef = useRef<HTMLTextAreaElement | null>(null);\n  const focus = useCallback(() => {\n    htmlElRef.current?.focus();\n  }, []);\n\n  return [htmlElRef, focus];\n};\n\nTextareaComponent.displayName = \"TextareaComponent\";\nconst DISPLAY_NAME = \"Textarea\";\nTextarea.displayName = DISPLAY_NAME;\n"],"names":["TextareaComponent","props","ref","MantineTextarea","Textarea","DISPLAY_NAME","TextareaWithoutRef","inputRef","focus","useFocus","mergedRef","useMergedRef","innerRef","id","useComponentId","state","dispatch","useTextareaState","initialState","disabled","defaultDisabled","value","defaultValue","inputProps","useInput","e","currentTarget","useRegisterFormInput","className","style","width","height","grow","_","validate","__","onChange","___","____","_____","restProps","classes","layoutClasses","cx","useCommonLayoutStyle","htmlElRef","useRef","useCallback","current","displayName"],"mappings":";;;;;;;;;;AAcaA,MAAAA,oBACX,2BAAA,CAACC,OAA+BC,4BAC7BC,iBAAoBF,OAAO,IAAA,EAEhC;AAEO,MAAMG,WACX,2BAAA,CAACH,OAAsBC,4BACpB,wBAAuB,EAAA,eAAeG,cACrC,UAAA,oBAAC,sBAAuBJ,GAAAA,OAAO,UAAUC,IAAAA,CAAI,GAC/C,CAEJ;AAEaI,MAAAA,qBAAqBA,CAChCL,UACG;AACH,QAAM,CAACM,UAAUC,KAAK,IAAIC,SAAS;AACnC,QAAMC,YAAYC,aAAaJ,UAAUN,MAAMW,QAAQ;AACjDC,QAAAA,KAAKC,eAAeb,MAAMY,EAAE;AAC5B,QAAA;AAAA,IAAEE;AAAAA,IAAOC;AAAAA,EAAAA,IAAaC,iBAAiBJ,IAAI;AAAA,IAC/CK,cAAc;AAAA,MACZC,UAAUlB,MAAMkB,YAAYlB,MAAMmB;AAAAA,MAClCC,OAAOpB,MAAMoB,SAASpB,MAAMqB;AAAAA,IAC9B;AAAA,IACAd;AAAAA,EAAAA,CACD;AACK,QAAA;AAAA,IAAEe;AAAAA,EAAAA,IAAeC,SACrBvB,OACAc,OACAC,UACA,CAACS,MAAwCA,EAAEC,cAAcL,KAC3D;AACAM,uBAAqBd,IAAI,YAAY;AAC/B,QAAA;AAAA,IACJe;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACApB,UAAUqB;AAAAA,IACVC,UAAUC;AAAAA,IACVC,UAAUC;AAAAA,IACVjB,iBAAiBkB;AAAAA,IACjBhB,cAAciB;AAAAA,IACd,GAAGC;AAAAA,EACDvC,IAAAA;AACE,QAAA;AAAA,IAAEwC,SAASC;AAAAA,IAAeC;AAAAA,MAAOC,qBAAqB;AAAA,IAC1Dd;AAAAA,IACAC;AAAAA,IACAC;AAAAA,EAAAA,CACD;AACD,SACG,oBAAA,mBAAA,EACC,KAAKtB,WACL,WAAWiC,GAAGD,cAAcb,OAAOD,SAAS,GAC5C,OACA,GAAIL,YACAiB,GAAAA,UACJ,CAAA;AAEN;AAEA,MAAM/B,WAAWA,MAA8C;AACvDoC,QAAAA,YAAYC,OAAmC,IAAI;AACnDtC,QAAAA,QAAQuC,YAAY,MAAM;;AAC9BF,oBAAUG,YAAVH,mBAAmBrC;AAAAA,EACrB,GAAG,CAAE,CAAA;AAEE,SAAA,CAACqC,WAAWrC,KAAK;AAC1B;AAEAR,kBAAkBiD,cAAc;AAChC,MAAM5C,eAAe;AACrBD,SAAS6C,cAAc5C;"}