{"version":3,"file":"NumberInput.js","sources":["../../../src/components/number/NumberInput.tsx"],"sourcesContent":["import { NumberInput as MantineNumberInput } from \"@mantine/core\";\nimport { forwardRef } from \"react\";\nimport * as React from \"react\";\n\nimport { ComponentErrorBoundary } from \"components/errorBoundary/ComponentErrorBoundary\";\nimport { useCommonLayoutStyle } from \"components/layout/useCommonLayoutStyle\";\nimport { useRegisterFormInput } from \"state/components/form/useRegisterFormInput\";\nimport { useInput } from \"state/components/input/useInput\";\nimport { useNumberInputState } from \"state/components/number-input\";\nimport { useComponentId } from \"state/components/useId\";\n\nimport {\n  NumberInputComponentProps,\n  NumberInputProps,\n} from \"./NumberInput.types\";\nimport {\n  currencyFormatter,\n  currencyParser,\n  percentFormatter,\n  percentParser,\n} from \"./numberUtils\";\n\nexport const NumberInputComponent = forwardRef(\n  (\n    { width, ...props }: NumberInputComponentProps,\n    ref: React.Ref<HTMLInputElement>,\n  ) => {\n    let parser;\n    let formatter;\n    if (props.format === \"currency\") {\n      parser = currencyParser(props.currency);\n      formatter = currencyFormatter(props.currency);\n    } else if (props.format === \"percent\") {\n      parser = percentParser;\n      formatter = percentFormatter;\n    }\n    return (\n      <MantineNumberInput\n        parser={parser}\n        formatter={formatter}\n        {...props}\n        ref={ref}\n      />\n    );\n  },\n);\n\nexport const NumberInput = forwardRef(\n  (props: NumberInputProps, ref: React.Ref<HTMLInputElement>) => (\n    <ComponentErrorBoundary componentName={DISPLAY_NAME}>\n      <NumberInputWithoutRef {...props} innerRef={ref} />\n    </ComponentErrorBoundary>\n  ),\n);\n\nexport const NumberInputWithoutRef = (\n  props: NumberInputProps & { innerRef: React.Ref<HTMLInputElement> },\n) => {\n  const id = useComponentId(props.id);\n  const { state, dispatch } = useNumberInputState(id, {\n    initialState: {\n      disabled: props.disabled ?? props.defaultDisabled,\n      value: props.value ?? props.defaultValue,\n    },\n    focus,\n    min: props.min,\n    max: props.max,\n  });\n  const { inputProps } = useInput(props, state, dispatch, (v) => v);\n  const {\n    className,\n    style,\n    width,\n    height,\n    grow,\n    innerRef: _,\n    validate: __,\n    onChange: ___,\n    defaultDisabled: ____,\n    defaultValue: _____,\n    ...restProps\n  } = props;\n  const { classes: layoutClasses, cx } = useCommonLayoutStyle({\n    width,\n    height,\n    grow,\n  });\n  useRegisterFormInput(id, \"number-input\");\n  return (\n    <NumberInputComponent\n      ref={props.innerRef}\n      className={cx(layoutClasses.style, className)}\n      style={style}\n      {...inputProps}\n      {...restProps}\n    />\n  );\n};\nNumberInputComponent.displayName = \"NumberInputComponent\";\nconst DISPLAY_NAME = \"NumberInput\";\nNumberInput.displayName = DISPLAY_NAME;\n"],"names":["NumberInputComponent","width","props","ref","parser","formatter","format","currencyParser","currency","currencyFormatter","percentParser","percentFormatter","MantineNumberInput","NumberInput","DISPLAY_NAME","NumberInputWithoutRef","id","useComponentId","state","dispatch","useNumberInputState","initialState","disabled","defaultDisabled","value","defaultValue","focus","min","max","inputProps","useInput","v","className","style","height","grow","innerRef","_","validate","__","onChange","___","____","_____","restProps","classes","layoutClasses","cx","useCommonLayoutStyle","useRegisterFormInput","displayName"],"mappings":";;;;;;;;;;AAsBaA,MAAAA,kDACX,CACE;AAAA,EAAEC;AAAAA,EAAO,GAAGC;AAAiC,GAC7CC,QACG;AACCC,MAAAA;AACAC,MAAAA;AACAH,MAAAA,MAAMI,WAAW,YAAY;AACtBC,aAAAA,eAAeL,MAAMM,QAAQ;AAC1BC,gBAAAA,kBAAkBP,MAAMM,QAAQ;AAAA,EAAA,WACnCN,MAAMI,WAAW,WAAW;AAC5BI,aAAAA;AACGC,gBAAAA;AAAAA,EACd;AACA,6BACGC,eACC,EAAA,QACA,WACIV,GAAAA,OACJ,IACA,CAAA;AAEN,CACF;AAEO,MAAMW,cACX,2BAAA,CAACX,OAAyBC,4BACvB,wBAAuB,EAAA,eAAeW,cACrC,UAAA,oBAAC,yBAA0BZ,GAAAA,OAAO,UAAUC,IAAAA,CAAI,GAClD,CAEJ;AAEaY,MAAAA,wBAAwBA,CACnCb,UACG;AACGc,QAAAA,KAAKC,eAAef,MAAMc,EAAE;AAC5B,QAAA;AAAA,IAAEE;AAAAA,IAAOC;AAAAA,EAAAA,IAAaC,oBAAoBJ,IAAI;AAAA,IAClDK,cAAc;AAAA,MACZC,UAAUpB,MAAMoB,YAAYpB,MAAMqB;AAAAA,MAClCC,OAAOtB,MAAMsB,SAAStB,MAAMuB;AAAAA,IAC9B;AAAA,IACAC;AAAAA,IACAC,KAAKzB,MAAMyB;AAAAA,IACXC,KAAK1B,MAAM0B;AAAAA,EAAAA,CACZ;AACK,QAAA;AAAA,IAAEC;AAAAA,EAAAA,IAAeC,SAAS5B,OAAOgB,OAAOC,UAAWY,OAAMA,CAAC;AAC1D,QAAA;AAAA,IACJC;AAAAA,IACAC;AAAAA,IACAhC;AAAAA,IACAiC;AAAAA,IACAC;AAAAA,IACAC,UAAUC;AAAAA,IACVC,UAAUC;AAAAA,IACVC,UAAUC;AAAAA,IACVlB,iBAAiBmB;AAAAA,IACjBjB,cAAckB;AAAAA,IACd,GAAGC;AAAAA,EACD1C,IAAAA;AACE,QAAA;AAAA,IAAE2C,SAASC;AAAAA,IAAeC;AAAAA,MAAOC,qBAAqB;AAAA,IAC1D/C;AAAAA,IACAiC;AAAAA,IACAC;AAAAA,EAAAA,CACD;AACDc,uBAAqBjC,IAAI,cAAc;AACvC,SACG,oBAAA,sBAAA,EACC,KAAKd,MAAMkC,UACX,WAAWW,GAAGD,cAAcb,OAAOD,SAAS,GAC5C,UACIH,YACAe,GAAAA,UACJ,CAAA;AAEN;AACA5C,qBAAqBkD,cAAc;AACnC,MAAMpC,eAAe;AACrBD,YAAYqC,cAAcpC;"}