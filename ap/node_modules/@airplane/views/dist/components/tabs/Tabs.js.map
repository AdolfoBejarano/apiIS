{"version":3,"file":"Tabs.js","sources":["../../../src/components/tabs/Tabs.tsx"],"sourcesContent":["import {\n  Tabs as MantineTabs,\n  TabsOrientation as MantineTabsOrientation,\n} from \"@mantine/core\";\nimport { isValidElement, ReactElement, useEffect, useMemo } from \"react\";\n\nimport { ComponentErrorBoundary } from \"components/errorBoundary/ComponentErrorBoundary\";\nimport { Text } from \"components/text/Text\";\nimport { useTabsRouting } from \"routing/useTabsRouting\";\nimport { useTabsState } from \"state/components/tabs\";\nimport { useComponentId } from \"state/components/useId\";\n\nimport flattenChildren from \"./flattenchildren\";\nimport { useStyles } from \"./Tabs.styles\";\nimport {\n  TabProps,\n  TabsComponentProps,\n  TabsPosition,\n  TabsProps,\n} from \"./Tabs.types\";\n\nconst DEFAULT_PLACEMENT = \"top\";\nconst DEFAULT_POSITION = \"start\";\nconst DEFAULT_GROW = false;\n\nconst POSITION_TO_MANTINE_POSITION: Record<TabsPosition, MantineTabsPosition> =\n  {\n    start: \"left\",\n    end: \"right\",\n    apart: \"apart\",\n    center: \"center\",\n  };\n\n// Mantine doesn't export these types so we define them to get rid of type errors\ntype MantineTabsPosition = \"right\" | \"left\" | \"apart\" | \"center\";\ntype MantineTabsPlacement = \"left\" | \"right\";\n\nexport const TabsComponent = ({\n  placement = DEFAULT_PLACEMENT,\n  position = DEFAULT_POSITION,\n  grow = DEFAULT_GROW,\n  children,\n  ...props\n}: TabsComponentProps) => {\n  const { classes } = useStyles({ placement });\n\n  // Get contents for the panel from the children of the Tabs.Tab components after flattening fragments\n  const panelContents = useMemo(\n    () =>\n      flattenChildren(children)\n        .filter(\n          (c) =>\n            isValidElement(c) &&\n            (c as ReactElement).props.value &&\n            (c as ReactElement).props.children,\n        )\n        .map((c) => ({\n          value: (c as ReactElement).props.value,\n          contents: (c as ReactElement).props.children,\n        })),\n    [children],\n  );\n\n  const TabsList = useMemo(\n    () => (\n      <MantineTabs.List\n        position={POSITION_TO_MANTINE_POSITION[position]}\n        grow={grow}\n      >\n        {children}\n      </MantineTabs.List>\n    ),\n    [children, grow, position],\n  );\n\n  let orientation: MantineTabsOrientation;\n  let inverted = false;\n  let mantinePlacement: MantineTabsPlacement | undefined;\n  switch (placement) {\n    case \"top\":\n      orientation = \"horizontal\";\n      break;\n    case \"bottom\":\n      orientation = \"horizontal\";\n      inverted = true;\n      break;\n    case \"left\":\n      orientation = \"vertical\";\n      mantinePlacement = \"left\";\n      break;\n    case \"right\":\n      orientation = \"vertical\";\n      mantinePlacement = \"right\";\n      break;\n  }\n  return (\n    <MantineTabs\n      {...props}\n      inverted={inverted}\n      orientation={orientation}\n      placement={mantinePlacement}\n      classNames={{\n        root: classes.root,\n        tabLabel: classes.tabLabel,\n        tabIcon: classes.tabIcon,\n        tab: classes.tab,\n        tabsList: classes.tabsList,\n      }}\n    >\n      {placement !== \"bottom\" && TabsList}\n\n      {panelContents.map((p) => (\n        <MantineTabs.Panel\n          key={p.value}\n          value={p.value}\n          className={classes.panel}\n        >\n          <Text>{p.contents}</Text>\n        </MantineTabs.Panel>\n      ))}\n\n      {placement === \"bottom\" && TabsList}\n    </MantineTabs>\n  );\n};\n\nexport const Tabs = ({\n  defaultValue = null,\n  id: propId,\n  onTabChange: propsOnTabChange,\n  value: controlledValue,\n  routingKey = null,\n  ...props\n}: TabsProps) => {\n  const id = useComponentId(propId);\n  const { routerValue, navigateTab } = useTabsRouting(routingKey);\n  const { value, setValue } = useTabsState(id, {\n    initialState: {\n      value: controlledValue || routerValue || defaultValue,\n    },\n  });\n  useEffect(() => {\n    if (routingKey !== null) {\n      if (routerValue !== undefined) {\n        setValue(routerValue);\n      } else {\n        setValue(defaultValue);\n      }\n    }\n  }, [routingKey, routerValue, defaultValue, setValue]);\n\n  return (\n    <ComponentErrorBoundary componentName={Tabs.displayName}>\n      <TabsComponent\n        value={controlledValue !== undefined ? controlledValue : value}\n        onTabChange={(v) => {\n          setValue(v);\n          if (propsOnTabChange) {\n            propsOnTabChange(v);\n          }\n          navigateTab(v);\n        }}\n        {...props}\n      />\n    </ComponentErrorBoundary>\n  );\n};\n\nexport const TabComponent = ({\n  children,\n  value,\n  label = value,\n  ...props\n}: TabProps) => {\n  return (\n    <MantineTabs.Tab value={value} {...props}>\n      {label}\n    </MantineTabs.Tab>\n  );\n};\n\nexport const Tab = ({ ...props }: TabProps) => {\n  return (\n    <ComponentErrorBoundary componentName={Tab.displayName}>\n      <TabComponent {...props} />\n    </ComponentErrorBoundary>\n  );\n};\n\nTabs.displayName = \"Tabs\";\nTab.displayName = \"Tabs.Tab\";\nTabs.Tab = Tab;\n"],"names":["DEFAULT_PLACEMENT","DEFAULT_POSITION","DEFAULT_GROW","POSITION_TO_MANTINE_POSITION","start","end","apart","center","TabsComponent","placement","position","grow","children","props","classes","useStyles","panelContents","useMemo","flattenChildren","filter","c","isValidElement","value","map","contents","TabsList","MantineTabs","orientation","inverted","mantinePlacement","root","tabLabel","tabIcon","tab","tabsList","p","panel","Tabs","defaultValue","id","propId","onTabChange","propsOnTabChange","controlledValue","routingKey","useComponentId","routerValue","navigateTab","useTabsRouting","setValue","useTabsState","initialState","useEffect","undefined","displayName","v","TabComponent","label","Tab"],"mappings":"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"}