{"version":3,"file":"Slider.js","sources":["../../../src/components/slider/Slider.tsx"],"sourcesContent":["import {\n  Slider as MantineSlider,\n  createStyles,\n  Input as MantineInput,\n} from \"@mantine/core\";\nimport { forwardRef } from \"react\";\n\nimport { ComponentErrorBoundary } from \"components/errorBoundary/ComponentErrorBoundary\";\nimport { useCommonLayoutStyle } from \"components/layout/useCommonLayoutStyle\";\nimport { useRegisterFormInput } from \"state/components/form/useRegisterFormInput\";\nimport { useInput } from \"state/components/input/useInput\";\nimport { useSliderState } from \"state/components/number-input\";\nimport { useComponentId } from \"state/components/useId\";\n\nimport { SliderComponentProps, SliderProps } from \"./Slider.types\";\n\nconst DEFAULT_MIN = 0;\nconst DEFAULT_MAX = 100;\nconst DEFAULT_STEP = 1;\nconst DEFAULT_SIZE = \"md\";\n\ntype StyleParams = {\n  hasMarks: boolean;\n  hasLabel: boolean;\n};\n\nexport const useStyles = createStyles((theme, params: StyleParams) => ({\n  // TODO: replace with new spacing scale\n  slider: {\n    height: 36,\n    paddingTop: 12,\n    paddingBottom: params.hasMarks ? 24 : params.hasLabel ? 18 : 12,\n  },\n  markLabel: { fontSize: theme.fontSizes.xs },\n  label: {\n    paddingLeft: theme.spacing.xs,\n    paddingRight: theme.spacing.xs,\n    // TODO: replace with new spacing scale\n    top: params.hasMarks ? -32 : -34,\n  },\n}));\n\n/** Presentational slider component */\nexport const SliderComponent = forwardRef(\n  (\n    {\n      valueLabelDisplay = \"auto\",\n      min = DEFAULT_MIN,\n      max = DEFAULT_MAX,\n      step = DEFAULT_STEP,\n      size = DEFAULT_SIZE,\n      label,\n      error,\n      valueLabel,\n      className,\n      style,\n      width,\n      height,\n      grow,\n      ...props\n    }: SliderComponentProps & {\n      required?: boolean;\n    },\n    ref: React.Ref<HTMLInputElement>,\n  ) => {\n    const { classes } = useStyles({\n      hasMarks: props.marks !== undefined,\n      hasLabel: label !== undefined,\n    });\n    const { classes: layoutClasses, cx } = useCommonLayoutStyle({\n      width,\n      height,\n      grow,\n    });\n\n    return (\n      <MantineInput.Wrapper\n        id=\"slider\"\n        label={label}\n        withAsterisk={props.required}\n        error={error}\n        className={layoutClasses.style}\n      >\n        <MantineSlider\n          className={cx(classes.slider, className)}\n          style={style}\n          classNames={{ markLabel: classes.markLabel, label: classes.label }}\n          min={min}\n          max={max}\n          step={step}\n          size={size}\n          label={valueLabelDisplay === \"off\" ? null : valueLabel}\n          labelAlwaysOn={valueLabelDisplay === \"on\"}\n          {...props}\n          ref={ref}\n        />\n      </MantineInput.Wrapper>\n    );\n  },\n);\n\nexport const Slider = forwardRef(\n  (props: SliderProps, ref: React.Ref<HTMLInputElement>) => (\n    <ComponentErrorBoundary componentName={DISPLAY_NAME}>\n      <SliderWithoutRef {...props} innerRef={ref} />\n    </ComponentErrorBoundary>\n  ),\n);\n\nexport const SliderWithoutRef = (\n  props: SliderProps & { innerRef: React.Ref<HTMLInputElement> },\n) => {\n  const id = useComponentId(props.id);\n  const { state, dispatch } = useSliderState(id, {\n    initialState: {\n      disabled: props.disabled ?? props.defaultDisabled,\n      // Default the initial value to the minimum if no default value is provided so reset works\n      value: props.value ?? props.defaultValue ?? props.min ?? DEFAULT_MIN,\n    },\n    focus,\n    min: props.min ?? DEFAULT_MIN,\n    max: props.max ?? DEFAULT_MAX,\n  });\n  const { inputProps } = useInput(props, state, dispatch, (v) => v);\n\n  useRegisterFormInput(id, \"slider\");\n\n  const {\n    innerRef: _,\n    validate: __,\n    onChange: ___,\n    defaultDisabled: ____,\n    defaultValue: _____,\n    ...restProps\n  } = props;\n  return (\n    <SliderComponent ref={props.innerRef} {...inputProps} {...restProps} />\n  );\n};\n\nSliderComponent.displayName = \"SliderComponent\";\nconst DISPLAY_NAME = \"Slider\";\nSlider.displayName = DISPLAY_NAME;\n"],"names":["DEFAULT_MIN","DEFAULT_MAX","DEFAULT_STEP","DEFAULT_SIZE","useStyles","createStyles","theme","params","slider","height","paddingTop","paddingBottom","hasMarks","hasLabel","markLabel","fontSize","fontSizes","xs","label","paddingLeft","spacing","paddingRight","top","SliderComponent","valueLabelDisplay","min","max","step","size","error","valueLabel","className","style","width","grow","props","ref","classes","marks","undefined","layoutClasses","cx","useCommonLayoutStyle","MantineInput","required","MantineSlider","Slider","DISPLAY_NAME","SliderWithoutRef","id","useComponentId","state","dispatch","useSliderState","initialState","disabled","defaultDisabled","value","defaultValue","focus","inputProps","useInput","v","useRegisterFormInput","innerRef","_","validate","__","onChange","___","____","_____","restProps","displayName"],"mappings":"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"}