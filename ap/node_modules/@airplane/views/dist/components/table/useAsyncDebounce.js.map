{"version":3,"file":"useAsyncDebounce.js","sources":["../../../src/components/table/useAsyncDebounce.tsx"],"sourcesContent":["// Copied from https://github.com/TanStack/table/blob/b77ed829917ab3254be48bff2aac7602b9133982/src/publicUtils.js#L163\n// Importing from react-table produces an error.\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useRef, useCallback } from \"react\";\n\nfunction useGetLatest(obj: any): any {\n  const ref = useRef();\n  ref.current = obj;\n\n  return useCallback(() => ref.current, []);\n}\n\nexport function useAsyncDebounce(defaultFn: any, defaultWait = 0) {\n  const debounceRef = useRef<any>({});\n\n  const getDefaultFn = useGetLatest(defaultFn);\n  const getDefaultWait = useGetLatest(defaultWait);\n\n  return useCallback(\n    async (...args: any) => {\n      if (!debounceRef.current.promise) {\n        debounceRef.current.promise = new Promise((resolve, reject) => {\n          debounceRef.current.resolve = resolve;\n          debounceRef.current.reject = reject;\n        });\n      }\n\n      if (debounceRef.current.timeout) {\n        clearTimeout(debounceRef.current.timeout);\n      }\n\n      debounceRef.current.timeout = setTimeout(async () => {\n        delete debounceRef.current.timeout;\n        try {\n          debounceRef.current.resolve(await getDefaultFn()(...args));\n        } catch (err) {\n          debounceRef.current.reject(err);\n        } finally {\n          delete debounceRef.current.promise;\n        }\n      }, getDefaultWait());\n\n      return debounceRef.current.promise;\n    },\n    [getDefaultFn, getDefaultWait],\n  );\n}\n"],"names":["useGetLatest","obj","ref","useRef","current","useCallback","useAsyncDebounce","defaultFn","defaultWait","debounceRef","getDefaultFn","getDefaultWait","args","promise","Promise","resolve","reject","timeout","setTimeout","err"],"mappings":";AAKA,SAASA,aAAaC,KAAe;AACnC,QAAMC,MAAMC;AACZD,MAAIE,UAAUH;AAEd,SAAOI,YAAY,MAAMH,IAAIE,SAAS,CAAE,CAAA;AAC1C;AAEgBE,SAAAA,iBAAiBC,WAAgBC,cAAc,GAAG;AAC1DC,QAAAA,cAAcN,OAAY,CAAA,CAAE;AAE5BO,QAAAA,eAAeV,aAAaO,SAAS;AACrCI,QAAAA,iBAAiBX,aAAaQ,WAAW;AAExCH,SAAAA,YACL,UAAUO,SAAc;AAClB,QAAA,CAACH,YAAYL,QAAQS,SAAS;AAChCJ,kBAAYL,QAAQS,UAAU,IAAIC,QAAQ,CAACC,SAASC,WAAW;AAC7DP,oBAAYL,QAAQW,UAAUA;AAC9BN,oBAAYL,QAAQY,SAASA;AAAAA,MAAAA,CAC9B;AAAA,IACH;AAEIP,QAAAA,YAAYL,QAAQa,SAAS;AAClBR,mBAAAA,YAAYL,QAAQa,OAAO;AAAA,IAC1C;AAEYb,gBAAAA,QAAQa,UAAUC,WAAW,YAAY;AACnD,aAAOT,YAAYL,QAAQa;AACvB,UAAA;AACFR,oBAAYL,QAAQW,QAAQ,MAAML,eAAe,GAAGE,IAAI,CAAC;AAAA,eAClDO,KAAK;AACAf,oBAAAA,QAAQY,OAAOG,GAAG;AAAA,MAAA,UACtB;AACR,eAAOV,YAAYL,QAAQS;AAAAA,MAC7B;AAAA,IAAA,GACCF,eAAgB,CAAA;AAEnB,WAAOF,YAAYL,QAAQS;AAAAA,EAAAA,GAE7B,CAACH,cAAcC,cAAc,CAC/B;AACF;"}