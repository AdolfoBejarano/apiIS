{"version":3,"file":"Link.js","sources":["../../../src/components/link/Link.tsx"],"sourcesContent":["import { Anchor } from \"@mantine/core\";\nimport { forwardRef, Ref, useEffect, useState } from \"react\";\n\nimport { ComponentErrorBoundary } from \"components/errorBoundary/ComponentErrorBoundary\";\nimport { ArrowTopRightOnSquareIconMini } from \"components/icon\";\nimport { THEME } from \"components/theme/theme\";\nimport { NavigateParams, useRouter } from \"routing\";\n\nimport { Props } from \"./Link.types\";\n\n/** LinkWithoutRef is exported for documentation purposes. */\nexport const LinkWithoutRef = ({\n  innerRef,\n  children,\n  newTab,\n  href,\n  ...props\n}: Props & { innerRef: Ref<HTMLAnchorElement> }) => {\n  const [linkHref, setLinkHref] = useState(() =>\n    typeof href === \"string\" ? href : \"\",\n  );\n  const { getHref } = useRouter();\n  useEffect(() => {\n    const setNavigationHref = async (navigationHref: NavigateParams) => {\n      const rhr = await getHref(navigationHref);\n      setLinkHref(rhr);\n    };\n    if (typeof href === \"string\") {\n      setLinkHref(href);\n    } else {\n      setNavigationHref(href);\n    }\n  }, [href, getHref]);\n  const target = props.target ?? newTab ? \"_blank\" : \"_top\";\n  return (\n    <Anchor\n      {...props}\n      target={target}\n      ref={innerRef}\n      sx={{ display: \"inline-flex\", alignItems: \"center\", ...props.sx }}\n      href={linkHref || undefined}\n    >\n      {children}\n      {target === \"_blank\" && (\n        <ArrowTopRightOnSquareIconMini\n          size={THEME.fontSizes[props.size!] * 0.9}\n          style={{ marginLeft: \".1em\", flexShrink: 0 }}\n        />\n      )}\n    </Anchor>\n  );\n};\n\nexport const Link = forwardRef(\n  (\n    { newTab = true, size = \"md\", ...props }: Props,\n    ref: Ref<HTMLAnchorElement>,\n  ) => {\n    return (\n      <ComponentErrorBoundary componentName={DISPLAY_NAME}>\n        <LinkWithoutRef {...props} newTab={newTab} size={size} innerRef={ref} />\n      </ComponentErrorBoundary>\n    );\n  },\n);\nconst DISPLAY_NAME = \"Link\";\nLink.displayName = DISPLAY_NAME;\n"],"names":["LinkWithoutRef","innerRef","children","newTab","href","props","linkHref","setLinkHref","useState","getHref","useRouter","useEffect","setNavigationHref","navigationHref","rhr","target","display","alignItems","sx","undefined","THEME","fontSizes","size","marginLeft","flexShrink","Link","ref","DISPLAY_NAME","displayName"],"mappings":";;;;;;;AAWO,MAAMA,iBAAiBA,CAAC;AAAA,EAC7BC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACA,GAAGC;AACyC,MAAM;AAC5C,QAAA,CAACC,UAAUC,WAAW,IAAIC,SAAS,MACvC,OAAOJ,SAAS,WAAWA,OAAO,EACpC;AACM,QAAA;AAAA,IAAEK;AAAAA,MAAYC,UAAU;AAC9BC,YAAU,MAAM;AACRC,UAAAA,oBAAoB,OAAOC,mBAAmC;AAC5DC,YAAAA,MAAM,MAAML,QAAQI,cAAc;AACxCN,kBAAYO,GAAG;AAAA,IAAA;AAEb,QAAA,OAAOV,SAAS,UAAU;AAC5BG,kBAAYH,IAAI;AAAA,IAAA,OACX;AACLQ,wBAAkBR,IAAI;AAAA,IACxB;AAAA,EAAA,GACC,CAACA,MAAMK,OAAO,CAAC;AAClB,QAAMM,SAASV,MAAMU,UAAUZ,SAAS,WAAW;AACnD,8BACG,QACC,EAAA,GAAIE,OACJ,QACA,KAAKJ,UACL,IAAI;AAAA,IAAEe,SAAS;AAAA,IAAeC,YAAY;AAAA,IAAU,GAAGZ,MAAMa;AAAAA,EAAG,GAChE,MAAMZ,YAAYa,QAEjBjB,UAAAA;AAAAA,IAAAA;AAAAA,IACAa,WAAW,YACV,oBAAC,+BACC,EAAA,MAAMK,MAAMC,UAAUhB,MAAMiB,IAAK,IAAI,KACrC,OAAO;AAAA,MAAEC,YAAY;AAAA,MAAQC,YAAY;AAAA,IAAA,GAE5C;AAAA,EACH,EAAA,CAAA;AAEJ;AAEaC,MAAAA,kCACX,CACE;AAAA,EAAEtB,SAAS;AAAA,EAAMmB,OAAO;AAAA,EAAM,GAAGjB;AAAa,GAC9CqB,QACG;AACH,SACG,oBAAA,wBAAA,EAAuB,eAAeC,cACrC,UAAC,oBAAA,gBAAA,EAAe,GAAItB,OAAO,QAAgB,MAAY,UAAUqB,IAAAA,CAAI,EACvE,CAAA;AAEJ,CACF;AACA,MAAMC,eAAe;AACrBF,KAAKG,cAAcD;"}