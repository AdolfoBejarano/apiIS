{"version":3,"file":"TextInput.js","sources":["../../../src/components/textinput/TextInput.tsx"],"sourcesContent":["import { TextInput as MantineTextInput } from \"@mantine/core\";\nimport { useMergedRef } from \"@mantine/hooks\";\nimport { ChangeEvent, forwardRef, Ref, useCallback, useRef } from \"react\";\nimport * as React from \"react\";\n\nimport { ComponentErrorBoundary } from \"components/errorBoundary/ComponentErrorBoundary\";\nimport { useCommonLayoutStyle } from \"components/layout/useCommonLayoutStyle\";\nimport { useRegisterFormInput } from \"state/components/form/useRegisterFormInput\";\nimport { useInput } from \"state/components/input/useInput\";\nimport { useTextInputState } from \"state/components/text-input\";\nimport { useComponentId } from \"state/components/useId\";\n\nimport { TextInputComponentProps, TextInputProps } from \"./TextInput.types\";\n\nexport const TextInputComponent = forwardRef(\n  (\n    { width, ...props }: TextInputComponentProps,\n    ref: React.Ref<HTMLInputElement>,\n  ) => <MantineTextInput {...props} ref={ref} />,\n);\n\nexport const TextInput = forwardRef(\n  (props: TextInputProps, ref: React.Ref<HTMLInputElement>) => (\n    <ComponentErrorBoundary componentName={DISPLAY_NAME}>\n      <TextInputWithoutRef {...props} innerRef={ref} />\n    </ComponentErrorBoundary>\n  ),\n);\n\nexport const TextInputWithoutRef = (\n  props: TextInputProps & { innerRef: React.Ref<HTMLInputElement> },\n) => {\n  const [inputRef, focus] = useFocus();\n  const mergedRef = useMergedRef(inputRef, props.innerRef);\n  const id = useComponentId(props.id);\n  const { state, dispatch } = useTextInputState(id, {\n    initialState: {\n      disabled: props.disabled ?? props.defaultDisabled,\n      value: props.value ?? props.defaultValue,\n    },\n    focus,\n  });\n  const { inputProps } = useInput(\n    props,\n    state,\n    dispatch,\n    (e: ChangeEvent<HTMLInputElement>) => e.currentTarget.value,\n  );\n  useRegisterFormInput(id, \"text-input\");\n  const {\n    className,\n    style,\n    width,\n    height,\n    grow,\n    innerRef: _,\n    validate: __,\n    onChange: ___,\n    defaultDisabled: ____,\n    defaultValue: _____,\n    ...restProps\n  } = props;\n  const { classes: layoutClasses, cx } = useCommonLayoutStyle({\n    width,\n    height,\n    grow,\n  });\n  return (\n    <TextInputComponent\n      ref={mergedRef}\n      className={cx(layoutClasses.style, className)}\n      style={style}\n      {...inputProps}\n      {...restProps}\n    />\n  );\n};\n\nconst useFocus = (): [Ref<HTMLInputElement>, () => void] => {\n  const htmlElRef = useRef<HTMLInputElement | null>(null);\n  const focus = useCallback(() => {\n    htmlElRef.current?.focus();\n  }, []);\n\n  return [htmlElRef, focus];\n};\n\nTextInputComponent.displayName = \"TextInputComponent\";\nconst DISPLAY_NAME = \"TextInput\";\nTextInput.displayName = DISPLAY_NAME;\n"],"names":["TextInputComponent","width","props","ref","MantineTextInput","TextInput","DISPLAY_NAME","TextInputWithoutRef","inputRef","focus","useFocus","mergedRef","useMergedRef","innerRef","id","useComponentId","state","dispatch","useTextInputState","initialState","disabled","defaultDisabled","value","defaultValue","inputProps","useInput","e","currentTarget","useRegisterFormInput","className","style","height","grow","_","validate","__","onChange","___","____","_____","restProps","classes","layoutClasses","cx","useCommonLayoutStyle","htmlElRef","useRef","useCallback","current","displayName"],"mappings":";;;;;;;;;;AAcaA,MAAAA,gDACX,CACE;AAAA,EAAEC;AAAAA,EAAO,GAAGC;AAA+B,GAC3CC,QACI,oBAAAC,aAAA,EAAqBF,GAAAA,OAAO,KAAS,CAC7C;AAEO,MAAMG,YACX,2BAAA,CAACH,OAAuBC,4BACrB,wBAAuB,EAAA,eAAeG,cACrC,UAAA,oBAAC,uBAAwBJ,GAAAA,OAAO,UAAUC,IAAAA,CAAI,GAChD,CAEJ;AAEaI,MAAAA,sBAAsBA,CACjCL,UACG;AACH,QAAM,CAACM,UAAUC,KAAK,IAAIC,SAAS;AACnC,QAAMC,YAAYC,aAAaJ,UAAUN,MAAMW,QAAQ;AACjDC,QAAAA,KAAKC,eAAeb,MAAMY,EAAE;AAC5B,QAAA;AAAA,IAAEE;AAAAA,IAAOC;AAAAA,EAAAA,IAAaC,kBAAkBJ,IAAI;AAAA,IAChDK,cAAc;AAAA,MACZC,UAAUlB,MAAMkB,YAAYlB,MAAMmB;AAAAA,MAClCC,OAAOpB,MAAMoB,SAASpB,MAAMqB;AAAAA,IAC9B;AAAA,IACAd;AAAAA,EAAAA,CACD;AACK,QAAA;AAAA,IAAEe;AAAAA,EAAAA,IAAeC,SACrBvB,OACAc,OACAC,UACA,CAACS,MAAqCA,EAAEC,cAAcL,KACxD;AACAM,uBAAqBd,IAAI,YAAY;AAC/B,QAAA;AAAA,IACJe;AAAAA,IACAC;AAAAA,IACA7B;AAAAA,IACA8B;AAAAA,IACAC;AAAAA,IACAnB,UAAUoB;AAAAA,IACVC,UAAUC;AAAAA,IACVC,UAAUC;AAAAA,IACVhB,iBAAiBiB;AAAAA,IACjBf,cAAcgB;AAAAA,IACd,GAAGC;AAAAA,EACDtC,IAAAA;AACE,QAAA;AAAA,IAAEuC,SAASC;AAAAA,IAAeC;AAAAA,MAAOC,qBAAqB;AAAA,IAC1D3C;AAAAA,IACA8B;AAAAA,IACAC;AAAAA,EAAAA,CACD;AACD,SACG,oBAAA,oBAAA,EACC,KAAKrB,WACL,WAAWgC,GAAGD,cAAcZ,OAAOD,SAAS,GAC5C,OACA,GAAIL,YACAgB,GAAAA,UACJ,CAAA;AAEN;AAEA,MAAM9B,WAAWA,MAA2C;AACpDmC,QAAAA,YAAYC,OAAgC,IAAI;AAChDrC,QAAAA,QAAQsC,YAAY,MAAM;;AAC9BF,oBAAUG,YAAVH,mBAAmBpC;AAAAA,EACrB,GAAG,CAAE,CAAA;AAEE,SAAA,CAACoC,WAAWpC,KAAK;AAC1B;AAEAT,mBAAmBiD,cAAc;AACjC,MAAM3C,eAAe;AACrBD,UAAU4C,cAAc3C;"}