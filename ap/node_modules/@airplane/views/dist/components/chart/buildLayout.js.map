{"version":3,"file":"buildLayout.js","sources":["../../../src/components/chart/buildLayout.ts"],"sourcesContent":["import { Layout } from \"plotly.js-basic-dist\";\n\nimport { AxisType, BarProps, ChartProps, Range } from \"./Chart.types\";\nimport { COLORS } from \"../theme/colors\";\n\nconst FONT_FAMILY =\n  \"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji\";\nconst FONT = {\n  family: FONT_FAMILY,\n  color: COLORS.gray[7],\n  size: 12,\n};\n\nexport const buildLayout = ({\n  legendPosition = \"right\",\n  xAxisType = \"auto\",\n  yAxisType = \"auto\",\n  xAxisRange,\n  yAxisRange,\n  ...props\n}: {\n  type: ChartProps[\"type\"];\n  legendPosition?: ChartProps[\"legendPosition\"];\n\n  xAxisTitle?: string;\n  xAxisType?: AxisType;\n  xAxisFormat?: string;\n  xAxisRange?: Range;\n\n  yAxisTitle?: string;\n  yAxisType?: AxisType;\n  yAxisFormat?: string;\n  yAxisRange?: Range;\n  mode?: BarProps[\"mode\"];\n}): Partial<Layout> => {\n  const baseLayout: Partial<Layout> = {\n    font: FONT,\n    margin: {\n      t: 0,\n      l: 16,\n      r: 24,\n      b: 32,\n      pad: 2,\n    },\n    clickmode: \"event+select\",\n    barmode: props.mode,\n    ...computeLegend(legendPosition),\n  };\n\n  switch (props.type) {\n    case \"pie\":\n      return {\n        ...baseLayout,\n      };\n    default: {\n      const xAxisTitle = props.xAxisTitle\n        ? {\n            text: props.xAxisTitle,\n            standoff: 20,\n          }\n        : undefined;\n      const yAxisTitle = props.yAxisTitle\n        ? {\n            text: props.yAxisTitle,\n            standoff: 20,\n          }\n        : undefined;\n      return {\n        ...baseLayout,\n        xaxis: {\n          title: xAxisTitle,\n          type: xAxisType === \"auto\" ? \"-\" : xAxisType,\n          tickformat: props.xAxisFormat,\n          automargin: true,\n          fixedrange: true,\n          zerolinecolor: \"#DEDEDE\",\n          range: Array.isArray(xAxisRange) ? xAxisRange : undefined,\n          rangemode: typeof xAxisRange === \"string\" ? xAxisRange : undefined,\n        },\n        yaxis: {\n          title: yAxisTitle,\n          type: yAxisType === \"auto\" ? \"-\" : yAxisType,\n          tickformat: props.yAxisFormat,\n          automargin: true,\n          fixedrange: true,\n          zerolinecolor: \"#DEDEDE\",\n          range: Array.isArray(yAxisRange) ? yAxisRange : undefined,\n          rangemode: typeof yAxisRange === \"string\" ? yAxisRange : undefined,\n        },\n      };\n    }\n  }\n};\n\nconst computeLegend = (\n  legendPosition: NonNullable<ChartProps[\"legendPosition\"]>,\n): Partial<Layout> => {\n  switch (legendPosition ?? \"right\") {\n    case \"left\": {\n      return {\n        showlegend: true,\n        legend: {\n          xanchor: \"left\",\n          orientation: \"v\",\n          x: -0.1,\n          y: 0.5,\n        },\n      };\n    }\n    case \"right\": {\n      return {\n        showlegend: true,\n        legend: {\n          xanchor: \"left\",\n          orientation: \"v\",\n          x: 1.05,\n          y: 0.5,\n        },\n      };\n    }\n    case \"top\": {\n      return {\n        showlegend: true,\n        legend: {\n          xanchor: \"center\",\n          orientation: \"h\",\n          x: 0.5,\n          y: 1.1,\n        },\n      };\n    }\n    case \"bottom\": {\n      return {\n        showlegend: true,\n        legend: {\n          xanchor: \"center\",\n          orientation: \"h\",\n          x: 0.45,\n          y: -0.2,\n        },\n      };\n    }\n    case \"hidden\": {\n      return {\n        showlegend: false,\n      };\n    }\n  }\n};\n"],"names":["FONT_FAMILY","FONT","family","color","COLORS","gray","size","buildLayout","legendPosition","xAxisType","yAxisType","xAxisRange","yAxisRange","props","baseLayout","font","margin","t","l","r","b","pad","clickmode","barmode","mode","computeLegend","type","xAxisTitle","text","standoff","undefined","yAxisTitle","xaxis","title","tickformat","xAxisFormat","automargin","fixedrange","zerolinecolor","range","Array","isArray","rangemode","yaxis","yAxisFormat","showlegend","legend","xanchor","orientation","x","y"],"mappings":"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"}