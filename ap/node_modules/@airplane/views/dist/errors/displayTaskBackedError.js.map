{"version":3,"file":"displayTaskBackedError.js","sources":["../../src/errors/displayTaskBackedError.tsx"],"sourcesContent":["import { uniqueId } from \"lodash-es\";\nimport hash from \"object-hash\";\n\nimport { ComponentAirplaneInternalErrorFallback } from \"components/errorBoundary/ComponentAirplaneInternalErrorFallback\";\nimport { RunErrorComponentErrorState } from \"components/errorBoundary/ComponentErrorState\";\nimport { ExecuteError } from \"components/query\";\nimport { sendViewMessage } from \"message/sendViewMessage\";\n\nimport {\n  getClientErrorMessageForTaskBackedComponent,\n  getInternalErrorMessageForTaskBackedComponent,\n} from \"./formatErrors\";\n\nexport const displayTaskBackedError = ({\n  error,\n  taskSlug,\n  runID,\n  componentName,\n}: {\n  error: ExecuteError;\n  taskSlug?: string;\n  runID?: string;\n  componentName: string;\n}) => {\n  if (error.type === \"FAILED\") {\n    return (\n      <RunErrorComponentErrorState\n        taskSlug={taskSlug}\n        componentName={componentName}\n        runID={runID}\n      />\n    );\n  } else if (error.type === \"CLIENT_ERROR\") {\n    throw new Error(\n      getClientErrorMessageForTaskBackedComponent(error.message, componentName),\n    );\n    // AIRPLANE_INTERNAL error\n  } else {\n    const errorID = uniqueId();\n    const message = getInternalErrorMessageForTaskBackedComponent(\n      error.message,\n      componentName,\n    );\n    sendViewMessage({\n      type: \"console\",\n      id: errorID,\n      messageType: \"error\",\n      message,\n      hash: hash(error),\n      time: Date.now(),\n    });\n    return (\n      <ComponentAirplaneInternalErrorFallback\n        errorMessage={message}\n        errorID={errorID}\n        componentName={componentName}\n      />\n    );\n  }\n};\n"],"names":["displayTaskBackedError","error","taskSlug","runID","componentName","type","Error","getClientErrorMessageForTaskBackedComponent","message","errorID","uniqueId","getInternalErrorMessageForTaskBackedComponent","id","messageType","hash","time","Date","now"],"mappings":";;;;;;;AAaO,MAAMA,yBAAyBA,CAAC;AAAA,EACrCC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAMF,MAAM;AACAH,MAAAA,MAAMI,SAAS,UAAU;AAC3B,WACG,oBAAA,6BAAA,EACC,UACA,eACA,MACA,CAAA;AAAA,EAAA,WAEKJ,MAAMI,SAAS,gBAAgB;AACxC,UAAM,IAAIC,MACRC,4CAA4CN,MAAMO,SAASJ,aAAa,CAC1E;AAAA,EAAA,OAEK;AACL,UAAMK,UAAUC;AAChB,UAAMF,UAAUG,8CACdV,MAAMO,SACNJ,aACF;AACgB,oBAAA;AAAA,MACdC,MAAM;AAAA,MACNO,IAAIH;AAAAA,MACJI,aAAa;AAAA,MACbL;AAAAA,MACAM,MAAMA,KAAKb,KAAK;AAAA,MAChBc,MAAMC,KAAKC,IAAI;AAAA,IAAA,CAChB;AACD,WACG,oBAAA,wCAAA,EACC,cAAcT,SACd,SACA,cACA,CAAA;AAAA,EAEN;AACF;"}