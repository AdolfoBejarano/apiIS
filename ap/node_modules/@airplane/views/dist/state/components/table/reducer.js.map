{"version":3,"file":"reducer.js","sources":["../../../../src/state/components/table/reducer.ts"],"sourcesContent":["import { isEqual } from \"lodash-es\";\n\nimport { MutationState } from \"state/tasks/useTaskMutation\";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Result = MutationState<any>;\n\nexport type Action<TRowData> =\n  | {\n      type: \"changeRowSelection\";\n      rows: TRowData[];\n    }\n  | {\n      type: \"setRowActionResult\";\n      result: Result;\n    };\n\nexport type ReducerState<TRowData> = {\n  selectedRows: TRowData[];\n  selectedRow?: TRowData;\n  rowActionResult: Result | null;\n};\n\nexport const reducer = <TRowData>(\n  state: ReducerState<TRowData>,\n  action: Action<TRowData>,\n): ReducerState<TRowData> => {\n  switch (action.type) {\n    case \"changeRowSelection\": {\n      const { rows } = action;\n\n      if (\n        rows.length === state.selectedRows.length &&\n        rows.every((row, index) => isEqual(row, state.selectedRows[index]))\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        selectedRows: rows,\n        selectedRow: rows.length === 1 ? rows[0] : undefined,\n      };\n    }\n    case \"setRowActionResult\": {\n      return {\n        ...state,\n        rowActionResult: action.result,\n      };\n    }\n    default:\n      throw new Error(\"invalid action\");\n  }\n};\n"],"names":["reducer","state","action","type","rows","length","selectedRows","every","row","index","isEqual","selectedRow","undefined","rowActionResult","result","Error"],"mappings":";AAuBaA,MAAAA,UAAU,CACrBC,OACAC,WAC2B;AAC3B,UAAQA,OAAOC,MAAI;AAAA,IACjB,KAAK,sBAAsB;AACnB,YAAA;AAAA,QAAEC;AAAAA,MAASF,IAAAA;AAEjB,UACEE,KAAKC,WAAWJ,MAAMK,aAAaD,UACnCD,KAAKG,MAAM,CAACC,KAAKC,UAAUC,QAAQF,KAAKP,MAAMK,aAAaG,KAAK,CAAC,CAAC,GAClE;AACOR,eAAAA;AAAAA,MACT;AACO,aAAA;AAAA,QACL,GAAGA;AAAAA,QACHK,cAAcF;AAAAA,QACdO,aAAaP,KAAKC,WAAW,IAAID,KAAK,CAAC,IAAIQ;AAAAA,MAAAA;AAAAA,IAE/C;AAAA,IACA,KAAK,sBAAsB;AAClB,aAAA;AAAA,QACL,GAAGX;AAAAA,QACHY,iBAAiBX,OAAOY;AAAAA,MAAAA;AAAAA,IAE5B;AAAA,IACA;AACQ,YAAA,IAAIC,MAAM,gBAAgB;AAAA,EACpC;AACF;"}