{"version":3,"file":"runValidation.js","sources":["../../../../src/state/components/input/runValidation.ts"],"sourcesContent":["import { ValidateFn, ValidateFnProp, InputProps } from \"./types\";\n\nexport const REQUIRED_ERROR = \"This field is required\";\n\n/**\n * runValidate runs all the validation functions and returns an array of errors.\n */\nexport const runValidate = <TValue>(\n  value: TValue | null | undefined,\n  { validate, required }: InputProps<TValue, unknown>,\n): string[] => {\n  const errors: string[] = [];\n  if (required) {\n    if (value == null || isEmptyValue(value)) {\n      errors.push(REQUIRED_ERROR);\n    }\n  }\n  if (validate != null && value != null && !isEmptyValue(value)) {\n    const validateFns = unpackValidateProp(validate);\n    for (const validateFn of validateFns) {\n      const error = validateFn(value);\n      if (error) {\n        errors.push(error);\n      }\n    }\n  }\n  return errors;\n};\n\nconst unpackValidateProp = <TValue>(\n  validateFn: ValidateFnProp<TValue>,\n): Array<ValidateFn<TValue>> => {\n  if (Array.isArray(validateFn)) {\n    return validateFn;\n  } else {\n    return [validateFn];\n  }\n};\n\nconst isEmptyValue = <TValue>(value: TValue): boolean => {\n  if (typeof value === \"string\" || Array.isArray(value)) {\n    return value.length === 0;\n  }\n  return false;\n};\n"],"names":["REQUIRED_ERROR","runValidate","value","validate","required","errors","isEmptyValue","push","validateFns","unpackValidateProp","validateFn","error","Array","isArray","length"],"mappings":"AAEO,MAAMA,iBAAiB;AAKjBC,MAAAA,cAAc,CACzBC,OACA;AAAA,EAAEC;AAAAA,EAAUC;AAAsC,MACrC;AACb,QAAMC,SAAmB,CAAA;AACzB,MAAID,UAAU;AACZ,QAAIF,SAAS,QAAQI,aAAaJ,KAAK,GAAG;AACxCG,aAAOE,KAAKP,cAAc;AAAA,IAC5B;AAAA,EACF;AACA,MAAIG,YAAY,QAAQD,SAAS,QAAQ,CAACI,aAAaJ,KAAK,GAAG;AACvDM,UAAAA,cAAcC,mBAAmBN,QAAQ;AAC/C,eAAWO,cAAcF,aAAa;AAC9BG,YAAAA,QAAQD,WAAWR,KAAK;AAC9B,UAAIS,OAAO;AACTN,eAAOE,KAAKI,KAAK;AAAA,MACnB;AAAA,IACF;AAAA,EACF;AACON,SAAAA;AACT;AAEA,MAAMI,qBAAqB,CACzBC,eAC8B;AAC1BE,MAAAA,MAAMC,QAAQH,UAAU,GAAG;AACtBA,WAAAA;AAAAA,EAAAA,OACF;AACL,WAAO,CAACA,UAAU;AAAA,EACpB;AACF;AAEA,MAAMJ,eAAe,CAASJ,UAA2B;AACvD,MAAI,OAAOA,UAAU,YAAYU,MAAMC,QAAQX,KAAK,GAAG;AACrD,WAAOA,MAAMY,WAAW;AAAA,EAC1B;AACO,SAAA;AACT;"}