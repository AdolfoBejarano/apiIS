{"version":3,"file":"useInput.js","sources":["../../../../src/state/components/input/useInput.ts"],"sourcesContent":["import { Dispatch, useCallback, useEffect, useMemo } from \"react\";\n\nimport { InputAction, InputState } from \"./reducer\";\nimport { InputProps } from \"./types\";\n\n/**\n * useInput is a hook that generates props for an input component.\n */\nexport const useInput = <TValue, TState extends InputState<TValue>, TOnChange>(\n  props: InputProps<TValue, TOnChange>,\n  state: TState,\n  dispatch: Dispatch<InputAction<TValue>>,\n  getChangeValue: (v: TOnChange) => TValue,\n) => {\n  const { value, disabled, showErrors, errors } = state;\n\n  useEffect(() => {\n    dispatch({\n      type: \"validate\",\n      required: props.required,\n      validate: props.validate,\n    });\n  }, [dispatch, props.required, props.validate, value]);\n\n  const propsOnChange = props.onChange;\n  const onChange = useCallback(\n    (v: TOnChange) => {\n      dispatch({ type: \"setValue\", value: getChangeValue(v) });\n      if (propsOnChange) {\n        propsOnChange(v);\n      }\n    },\n    [dispatch, getChangeValue, propsOnChange],\n  );\n\n  const inputProps = useMemo(\n    () => ({\n      error: getErrorMessage(showErrors, errors),\n      onChange,\n      value,\n      disabled,\n    }),\n    [showErrors, errors, onChange, value, disabled],\n  );\n\n  return { inputProps };\n};\n\nconst getErrorMessage = (\n  showErrors: boolean,\n  errors: string[],\n): string | undefined => {\n  if (showErrors && errors.length > 0) {\n    return errors.join(\"\\n\");\n  }\n  return undefined;\n};\n"],"names":["useInput","props","state","dispatch","getChangeValue","value","disabled","showErrors","errors","useEffect","type","required","validate","propsOnChange","onChange","useCallback","v","inputProps","useMemo","error","getErrorMessage","length","join","undefined"],"mappings":";AAQO,MAAMA,WAAW,CACtBC,OACAC,OACAC,UACAC,mBACG;AACG,QAAA;AAAA,IAAEC;AAAAA,IAAOC;AAAAA,IAAUC;AAAAA,IAAYC;AAAAA,EAAWN,IAAAA;AAEhDO,YAAU,MAAM;AACL,aAAA;AAAA,MACPC,MAAM;AAAA,MACNC,UAAUV,MAAMU;AAAAA,MAChBC,UAAUX,MAAMW;AAAAA,IAAAA,CACjB;AAAA,EAAA,GACA,CAACT,UAAUF,MAAMU,UAAUV,MAAMW,UAAUP,KAAK,CAAC;AAEpD,QAAMQ,gBAAgBZ,MAAMa;AACtBA,QAAAA,WAAWC,YACf,CAACC,MAAiB;AACP,aAAA;AAAA,MAAEN,MAAM;AAAA,MAAYL,OAAOD,eAAeY,CAAC;AAAA,IAAA,CAAG;AACvD,QAAIH,eAAe;AACjBA,oBAAcG,CAAC;AAAA,IACjB;AAAA,EAEF,GAAA,CAACb,UAAUC,gBAAgBS,aAAa,CAC1C;AAEMI,QAAAA,aAAaC,QACjB,OAAO;AAAA,IACLC,OAAOC,gBAAgBb,YAAYC,MAAM;AAAA,IACzCM;AAAAA,IACAT;AAAAA,IACAC;AAAAA,EAAAA,IAEF,CAACC,YAAYC,QAAQM,UAAUT,OAAOC,QAAQ,CAChD;AAEO,SAAA;AAAA,IAAEW;AAAAA,EAAAA;AACX;AAEA,MAAMG,kBAAkBA,CACtBb,YACAC,WACuB;AACnBD,MAAAA,cAAcC,OAAOa,SAAS,GAAG;AAC5Bb,WAAAA,OAAOc,KAAK,IAAI;AAAA,EACzB;AACOC,SAAAA;AACT;"}