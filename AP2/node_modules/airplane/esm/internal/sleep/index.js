import ms from "ms";
import { getRuntime } from "../runtime";
/**
 * Sleep for a specified amount of time.
 * @param duration The duration of time to sleep. Can be a ms formatted string or millisecond number.
 * @example
 *   // Sleep for 1 hour
 *   await sleep("1h")
 * @example
 *   // Sleep for 30 seconds
 *   await sleep("30s")
 * @example
 *   // Sleep for 3 minutes
 *   await sleep("3min")
 */
export const sleep = async (duration) => {
    if (!duration) {
        throw new Error("expected a duration for how long to sleep (e.g. '1h' to sleep for an hour)");
    }
    const durationMs = ms(duration);
    if (!durationMs) {
        throw new Error("duration must be a ms formatted string. (e.g. '1h' to sleep for an hour)");
    }
    if (durationMs < 1000) {
        throw new Error("sleep duration must be at least 1 second");
    }
    return getRuntime().sleep(durationMs);
};
